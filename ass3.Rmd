---
title: "R Notebook"
output: html_notebook
---


```{r setup, message=FALSE}
library(tidyverse)
library(tibble)
library(readr)
```

# Spørsmål 1 

Filen ddf_concepts.csv inneholder all mulig informasjon og ikke datasett, men 596 beskrivelser. 
Man kan for eksempel se at de har beskrivelser av alder av første ekteskap, arbeidsledighet, sykdom, dødsfall og alkoholkonsum. 

# Spørsmål 2

Filen ddf--entities-geo--country.csv gir oss et inblikk i ulike land, inntektensgrupperinger, hvilken religion de tilhører, annen geografisk informajson som for eksempel størrelse på landet og lokasjon, breddegrader osv. 

# Spørsmål 3 

 Filen dff-gapminder inneholder en tabell over regionene som er med i FN.
 
# Spørsmål 4 
 
```{r g_c}
library(readr)
g_c <- read_csv("Data/ddf--gapminder--systema_globalis-master/ddf--entities--geo--country.csv")
as_tibble(g_c)

```


```{r continents}
g_c <- g_c %>%
  mutate(continent = case_when(
     world_4region == "asia" & un_sdg_region %in% c("un_australia_and_new_zealand", "un_oceania_exc_australia_and_new_zealand") ~ "Oceania",
    world_4region ==  "asia" & !(un_sdg_region %in% c("un_australia_and_new_zealand", "un_oceania_exc_australia_and_new_zealand")) ~ "Asia",
    world_4region == "africa" ~ "Africa",
    world_4region == "americas" ~ "Americas",
    world_4region ==  "europe" ~ "Europe")
  ) %>%
 filter(!is.na(iso3166_1_alpha3))
```
 
# Spørsmål 5
```{r countries}
length(unique(g_c$country))
```

Det er nå 247 land. 
Tidligere 273 men vil valgte å filtrere ut utdaterte land. 

# Spørsmål 6

```{r countries_in_each_continent, message=FALSE}
g_c %>%
  group_by(continent) %>%
  summarise(count = length(unique(country)))

```
Som vi kan lese av i tabellen ovenfor, er det 59 land i Afrika, 55 land i Amerika, 47 land i Asia, 58 land i Europa og 28 land i Oseania som er involverte i datasettet. 


# Spørsmål 7

```{r, Lagt til en ny variabel }
lifeExp <-read_csv("Data/ddf--gapminder--systema_globalis-master/countries-etc-datapoints/ddf--datapoints--life_expectancy_years--by--geo--time.csv",col_types =cols(time =col_date(format = "%Y")))


lifeExp <- lifeExp%>%
  rename(year = time)

length(unique(lifeExp$geo))
```
Det er 189 land som har informasjon om life Expectancy.


# spørsmål 8

```{r,Variabler i g_c}
names(g_c)
```


```{r, valgt ut 10 variabler }
g_c <- g_c %>%
  select(country, name, iso3166_1_alpha3, main_religion_2008,un_sdg_region, world_4region, continent, world_6region,)%>%
  left_join(lifeExp, by =c("country" = "geo"))%>%
  filter(!(is.na(year)& is.na(life_expectancy_years)))%>%
  filter(year<"2020-01-01")
```


# spørsmål 9

```{r, observasjoner av LifeExp}
g_c_min <- g_c %>%
  group_by(country)%>%
    summarise(year_min =min(year)
g_c  <-  table(g_c_min$year_min)


```


# Spørsmål 10

```{r}
g_c_pop <- read_csv("Data/ddf--gapminder--systema_globalis-master/countries-etc-datapoints/ddf--datapoints--population_total--by--geo--time.csv",
col_types =cols(time =col_date(format = "%Y")))

g_c <- g_c%>%
  left_join(g_c_pop, by =c("country" = "geo", "year" = "time"))
```
Denne viser oss hvordan populasjonen øker over tid, ved å se på 59 297 observasjoner, tabellen inneholder tre ulike variabler; land, tid og populasjon. 
```


# Spørsmål 12 

```{r gdp_data_inflation}
gdp_pc <- read_csv("Data/ddf--gapminder--systema_globalis-master/countries-etc-datapoints/ddf--datapoints--gdppercapita_us_inflation_adjusted--by--geo--time.csv",
col_types =cols(time =col_date(format = "%Y")))
```

```{r  gc}
g_c <- g_c %>%
  left_join(gdp_pc, by=c("country"="geo", "year"="time"))

```

```{r gdp_data}
names(g_c)
```

